<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="profile.css">

    <link href="https://fonts.googleapis.com/css2?family=Bree+Serif&display=swap" rel="stylesheet">
</head>
<body>

  <nav id="navbar">
    <div id="logo">
        <img src="logo.jpg" alt="CampusEats">
    </div>

    <ul>
        <!-- Home -->
        <li class="item"><a href="firstpage.html">Home</a></li>
        <!-- Menu -->
        <li class="item"><a href="category1.html">Menu</a></li>
        <!-- Today's Specials -->
        <li class="item"><a href="food.html">Today's Specials</a></li>
        <!-- Login -->
        <!-- <li class="item"><a href="login1.html">Login</a></li> -->
        <!-- Profile -->
    </ul>
</nav>

    <section id="profile">
        <h1>Welcome <span id="username"></span>!</h1>
        <div class="profile-info">
            <h2>Profile Information</h2>
            <ul>
                <li><strong>Name:</strong> {{ name }}</li>
                <li><strong>Username:</strong> {{ username }}</li>
                <li><strong>Email:</strong> {{ email }}</li>
                <li><strong>Student ID:</strong> {{ studentId }}</li>
                <!-- <li><strong></strong></li> -->
                <!-- Add more profile fields as needed -->
            </ul>
        </div>
        <button type="submit" id="logoutbtn">Log Out</button>
        <div id="message"></div>
    </section>

    <script>
        // Function to display the profile information
        // function displayProfileInfo() {
        //     // Retrieve the logged-in user's username from localStorage
        //     const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
    
        //     if (loggedInUser) {
        //         // Retrieve all users from localStorage
        //         const users = JSON.parse(localStorage.getItem('users')) || [];
    
        //         // Find the current user's full information based on the username
        //         const currentUser = users.find(user => user.username === loggedInUser.username);
    
        //         if (currentUser) {
        //             // Display the user's profile information
        //             const profileInfo = document.querySelector('.profile-info');
        //             profileInfo.innerHTML = `
        //                 <h2>Profile Information</h2>
        //                 <ul>
        //                     <li><strong>Name:</strong> ${currentUser.username}</li>
        //                     <li><strong>Email:</strong> ${currentUser.email}</li>
        //                     <li><strong>Student ID:</strong> ${currentUser.studentId}</li>
        //                 </ul>
        //             `;
        //         } else {
        //             alert('No user information found. Please log in again.');
        //             window.location.href = 'login1.html'; // Redirect to login if no user found
        //         }
        //     } else {
        //         alert('You are not logged in. Please log in first.');
        //         window.location.href = 'login1.html'; // Redirect to login if no user is logged in
        //     }
        // }
    
        // // Call the function when the page loads
        // document.addEventListener('DOMContentLoaded', displayProfileInfo);


        // Function to display the profile information
function displayProfileInfo() {
  // Retrieve the logged-in user's username from localStorage
  const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));

  if (loggedInUser) {
    // Retrieve all users from localStorage
    const users = JSON.parse(localStorage.getItem('users')) || [];

    // Find the current user's full information based on the username
    const currentUser = users.find(user => user.username === loggedInUser.username);

    if (currentUser) {
      // Display the user's profile information
      const profileInfo = document.querySelector('.profile-info');
      document.getElementById('username').textContent = currentUser.username;
      profileInfo.innerHTML = `
        <h2>Profile Information</h2>
        <ul>
          <li><strong>Name:</strong> ${currentUser.name}</li>
          <li><strong>Username:</strong> ${currentUser.username}</li>
          <li><strong>Email:</strong> ${currentUser.email}</li>
          <li><strong>Student ID:</strong> ${currentUser.studentId}</li>
        </ul>
      `;
    } else {
      alert('No user information found. Please log in again.');
      window.location.href = 'login1.html'; // Redirect to login if no user found
    }
  } else {
    alert('You are not logged in. Please log in first.');
    window.location.href = 'login1.html'; // Redirect to login if no user is logged in
  }
}

// Call the function when the page loads
document.addEventListener('DOMContentLoaded', displayProfileInfo);


    </script>

    <script class="logoutbtn">
      
      document.getElementById("logoutbtn").addEventListener("click", function(event){
      event.preventDefault();
      const confirmLogout = confirm("Sure you don't want to order anymore?")
      if(confirmLogout)
      {
          localStorage.removeItem('loggedInUser');
          const message = document.getElementById("message");
          message.innerHTML="Log out successful! Redirecting....";
          setTimeout(function(){
            window.location.href = 'firstpage.html';
          },2000);
      }  
      
      else{
        console.log("False alarm it is! Continue surfing!!");
        // event.preventDefault();
        window.location.href='firstpage1.html';
      }
    });
    </script>
    
</body>
</html>
