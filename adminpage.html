<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CampusEats</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper@8.0.7/swiper-bundle.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Bree+Serif&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
</head>
<body>
    <nav id="navbar">
        <div id="logo">
            <img src="logo.jpg" alt="CampusEats">
        </div>

        <ul>
            <li class="item"><a href="firstpage1.html">Home</a></li>
            <li class="item"><a href="category1.html">Menu</a></li>
            <li class="item"><a href="food.html">Today's Specials</a></li>
            <li class="item"><a href="profile.html">Profile</a></li>
        </ul>
    </nav>
    
    <section id="home">
        <h1 class="h-primary center">Welcome to<h1 class="title">CampusEats</h1></h1>
        <button class="btn">Order now!</button>
    </section>

    <section id="services-container">
        <h1 class="h-primary center">Our Services</h1>
        <div id="services">
            <div class="box">
                <h2 class="editable" id="h2-1">Food Ordering</h2>
                <p class="center">Choose your favourite items from the menu...</p>
            </div>
            <div class="box">
                <img src="img/2.png" alt="">
                <h2 class="editable" id="h2-2">Order tokens provided</h2>
                <p class="center">Once you have done placing the order...</p>
            </div>
            <div class="box">
                <img src="img/3.png" alt="">
                <h2 class="editable" id="h2-3">Play games!</h2>
                <p class="center">Are you already in the canteen...</p>
            </div>
        </div>
    </section>

    <!-- Save and Reset buttons for the admin -->
    <section id="admin-controls" style="display: none;">
        <button id="saveChanges" class="btn">Save Changes</button>
        <button id="resetChanges" class="btn">Reset to Default</button>
    </section>

    <div class="swiper-container mySwiper">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <img src="Mouth Watering & Delicious South Indian Breakfast Thali.jfif" alt="Box 1">
                <h2 class="editable" id="h2-4">Recommending the canteen's most famous South Indian breakfast palette...</h2>
            </div>
            <div class="swiper-slide">
                <img src="Poori Masala - Spice Up The Curry.jfif" alt="Box 2">
                <h2 class="editable" id="h2-5">The piping hotness of a puri tossed together with bhaji masala...</h2>
            </div>
            <div class="swiper-slide">
                <img src="Vada Snap.jfif" alt="Box 3">
                <h2 class="editable" id="h2-6">The Medu vada! Known to be sold out even before the breakfast bell...</h2>
            </div>
        </div>
        <div class="swiper-pagination"></div>
    </div>

    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

    <script>
        const swiper = new Swiper('.mySwiper', {
            autoplay: {
                delay: 5000,
                disableOnInteraction: false,
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            loop: true,
        });

        document.addEventListener("DOMContentLoaded", function() {
            const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
            const editableElements = document.querySelectorAll("h2.editable");
            const saveButton = document.getElementById("saveChanges");
            const resetButton = document.getElementById("resetChanges");
            const adminControls = document.getElementById("admin-controls");

            // Load saved h2 content from localStorage (for all users)
            editableElements.forEach(h2 => {
                const savedContent = localStorage.getItem(h2.id);
                if (savedContent) {
                    h2.textContent = savedContent;
                }
            });

            // If the logged-in user is the admin, show admin controls
            if (loggedInUser && loggedInUser.username === "admin@dbit.in") {
                adminControls.style.display = "block"; // Show the Save and Reset buttons
                editableElements.forEach(h2 => {
                    h2.setAttribute("contenteditable", "true");
                    h2.style.border = "1px dashed #ccc"; // Visual indication
                });

                alert("You are logged in as admin. You can edit the content.");
            }

            // Save Changes: Save all edited h2 tags to localStorage
            saveButton.addEventListener("click", function() {
                editableElements.forEach(h2 => {
                    localStorage.setItem(h2.id, h2.textContent);
                });
                alert("Changes saved successfully.");
            });

            // Reset Changes: Clear all saved h2 content from localStorage and restore defaults
            resetButton.addEventListener("click", function() {
                if (confirm("Are you sure you want to reset all changes?")) {
                    editableElements.forEach(h2 => {
                        localStorage.removeItem(h2.id); // Remove saved content from localStorage
                        window.location.reload(); // Reload the page to restore default content
                    });
                }
            });
        });
    </script>

</body>
</html>
